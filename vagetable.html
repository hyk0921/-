<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>菜谱页面</title>
    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="sass/index.css">
    <link rel="stylesheet" href="sass/nav.css">
</head>
<body>
    <div id="wrap">
        <header>
            <h1>
                <a href=""></a>
            </h1>
            <ul class="list">
                <li><a href="">首页</a></li>
                <li><a href="">菜谱</a></li>
                <li><a href="">食材</a></li>
                <li><a href="">健康</a></li>
                <li><a href="">专题</a></li>
                <li><a href="">笔记</a></li>
                <li><a href="">社区</a></li>
                <li><a href="">活动</a></li>
                <li><a href="">搜索</a></li>
                <li class="show">
                    <a href=""></a>
                    <div class="bar-box" style="display:none;">
                        <a title="烘焙" href="">烘焙</a>
                        <a title="妈妈派" href="">妈妈派</a>
                    </div>
                </li>
            </ul>
            <ul class="about">
                <li>
                    <a class="reg" href="reg.html">注册</a>
                </li>
                <li>
                    <a class="login" href="login.html">登录</a>
                </li>
                <li class="show">
                    <a class="qq" href="">
                        <img src="https://static.meishichina.com/v6/img/lib/nir1.png" alt="">
                        <span>QQ登录</span>
                    </a>
                    <div class="bar-box">
                            <ul>
                                <li>
                                    <a href="">
                                        <img src="https://static.meishichina.com/v6/img/lib/nir2.png" alt="">
                                        微博登录
                                    </a>
                                </li>
                                <li>
                                    <a href="">
                                        <img src="https://static.meishichina.com/v6/img/lib/nir3.png" alt="">
                                        微信登录
                                    </a>
                                </li>
                            </ul>
                    </div>
                </li>
                <li class="show show2">
                    <a class="pub" href="">
                        <img src="https://static.meishichina.com/v6/img/lib/nr1.png" alt="">
                        <span>发布</span>
                    </a>
                    <div class="bar-box">
                        <ul>
                            <li class="bar-box-item-0">
                                <a style="line-height: 40px;" href="" class="">发菜谱</a>
                            </li>
                            <li class="bar-box-item-1">
                                <a style="line-height: 40px;" href=""  class="">发话题</a>
                            </li>
                            <li class="bar-box-item-2">
                                <a style="line-height: 40px;" href="" class="">发日志</a>
                            </li>
                        </ul>
                    </div>
                </li>
                <li><a class="sign" href="">
                        <img src="https://static.meishichina.com/v6/img/lib/nr2.png" alt="">
                        <span>签到有礼</span>
                    </a>
                </li>
                <li class="show3">
                    <a class="cli" href="">
                        <img src="https://static.meishichina.com/v6/img/lib/nr3.png" alt="">
                        <span>客户端</span>
                        <img style="display: none;" src="https://static.meishichina.com/v6/img/model/msc_app.png" alt="">
                    </a>
                </li>
            </ul>
        </header>
        <main>
            <nav>
                <div class="logo">
                    <a href="">美食天下</a>
                </div>
                <div class="logo_current left">
                    <h1><a href="" title="菜谱">菜谱</a></h1>
                </div>
                <div class="search">
                    <input type="text">
                    <div style="display: none;" class="beef"><p>牛肉</p></div>
                    <button>搜索</button>
                </div>
                <ul>
                    <li><a class="active" href="">菜谱首页</a></li>
                    <li><a href="">分类</a></li>
                    <li><a href="">菜单</a></li>
                    <li><a href="">排行</a></li>
                    <span class="linespan"></span>
                    <li><a href="">食材</a></li>
                    <li><a href="">食疗食补</a></li>
                </ul>
                
            </nav>
        </main>
        <div class="nav_wrap2">
            <ul>
                <li><a class="active" title="菜谱大全" href="">首页</a></li>
                <li><a title="热菜" href="">热菜</a></li>
                <li><a title="凉菜" href="">凉菜</a></li>
                <li><a title="汤羹" href="">汤羹</a></li>
                <li><a title="主食" href="">主食</a></li>
                <li><a title="小吃" href="">小吃</a></li>
                <li><a title="西餐" href="">西餐</a></li>
                <li><a title="烘焙" href="">烘焙</a></li>
                <li><a title="饮品" href="">饮品</a></li>
                <li><a title="泡酱腌菜" href="">泡酱腌菜</a></li>
                <li><a title="自制食材" href="">自制食材</a></li>
                <li><a title="家常菜谱" href="">家常菜谱</a></li>
                <li><a title="最新菜谱" href="">最新菜谱</a></li>
                <li class="right"><a href="" target="_blank">全部菜谱分类</a></li>
            </ul>
        </div>
        <div class="mt10">
            <img src="https://tpc.googlesyndication.com/simgad/1575545668792393300?sqp=4sqPyQQ7QjkqNxABHQAAtEIgASgBMAk4A0DwkwlYAWBfcAKAAQGIAQGdAQAAgD-oAQGwAYCt4gS4AV_FAS2ynT4&rs=AOga4qkum_Q2iWaHC7OnV-bmqEsCud5Uxw" alt="">
        </div>
        <div class="w2">
            <div class="banner">
                <ul class="bannerList">
                    <!--无缝操作的结构需要在最后加入第一张，在第一张前加入最后一张-->
                    
                    <li>
                        <a title="我上不了太空，但可以仰望星空！如何在餐桌上致敬神舟十三号？" href="" target="_blank">
                            <i><img class="imgLoad" src="https://i3.meishichina.com/attachment/recipe/2020/03/10/2020031015838212239151.jpg?x-oss-process=style/c320" ></i>
                            <div class="os"></div>
                            <p class="line2">我上不了太空，但可以仰望星空！如何在餐桌上致敬神舟十三号？<br><span>18篇菜谱</span></p>
                        </a>
                    </li>
                    <li>
                        <a title="小白菜的家常做法大全" href="" target="_blank">
                            <i><img class="imgLoad" src="https://i3.meishichina.com/attachment/recipe/2018/01/20/20180120151645829310413.jpg?x-oss-process=style/c320" ></i>
                            <div class="os"></div>
                            <p class="line2">小白菜的家常做法大全<br><span>78篇菜谱</span></p>
                        </a>
                    </li>
                    <li>
                        <a title="家常菜 素菜《完》" href="" target="_blank">
                            <i><img class="imgLoad" src="https://i3.meishichina.com/attachment/collect/2020/11/26/2020112616063870271878197577.jpg?x-oss-process=style/c320" ></i>
                            <div class="os"></div>
                            <p class="line2">家常菜 素菜《完》<br><span>93篇菜谱</span></p>
                        </a>
                    </li>
                    <li>
                        <a title="我上不了太空，但可以仰望星空！如何在餐桌上致敬神舟十三号？" href="" target="_blank">
                            <i><img class="imgLoad" src="https://i3.meishichina.com/attachment/collect/2021/10/15/2021101516342586157241.jpeg?x-oss-process=style/c320" ></i>
                            <div class="os"></div>
                            <p class="line2">我上不了太空，但可以仰望星空！如何在餐桌上致敬神舟十三号？<br><span>18篇菜谱</span></p>
                        </a>
                    </li>
                    <li>
                        <a title="小白菜的家常做法大全" href="" target="_blank">
                            <i><img class="imgLoad" src="https://i3.meishichina.com/attachment/collect/2021/05/27/2021052716221024345348197577.jpg?x-oss-process=style/c320" ></i>
                            <div class="os"></div>
                            <p class="line2">小白菜的家常做法大全<br><span>78篇菜谱</span></p>
                        </a>
                    </li>
                    <li>
                        <a title="家常菜 素菜《完》" href="" target="_blank">
                            <i><img class="imgLoad" src="https://i3.meishichina.com/attachment/recipe/2018/02/07/20180207151800778237013.jpg?x-oss-process=style/c320" ></i>
                            <div class="os"></div>
                            <p class="line2">家常菜 素菜《完》<br><span>93篇菜谱</span></p>
                        </a>
                    </li>
                    <li>
                        <a title="我上不了太空，但可以仰望星空！如何在餐桌上致敬神舟十三号？" href="" target="_blank">
                            <i><img class="imgLoad" src="https://i3.meishichina.com/attachment/recipe/2019/08/30/2019083015671515141219724956.jpg?x-oss-process=style/c320" ></i>
                            <div class="os"></div>
                            <p class="line2">我上不了太空，但可以仰望星空！如何在餐桌上致敬神舟十三号？<br><span>18篇菜谱</span></p>
                        </a>
                    </li>
                    <li>
                        <a title="小白菜的家常做法大全" href="" target="_blank">
                            <i><img class="imgLoad" src="https://i3.meishichina.com/attachment/collect/2021/03/17/2021031716159717497198199390.jpg?x-oss-process=style/c320" ></i>
                            <div class="os"></div>
                            <p class="line2">小白菜的家常做法大全<br><span>78篇菜谱</span></p>
                        </a>
                    </li>
                    <li>
                        <a title="家常菜 素菜《完》" href="" target="_blank">
                            <i><img class="imgLoad" src="https://i3.meishichina.com/attachment/collect/2021/01/11/2021011116103511671898199282.jpg?x-oss-process=style/c320" ></i>
                            <div class="os"></div>
                            <p class="line2">家常菜 素菜《完》<br><span>93篇菜谱</span></p>
                        </a>
                    </li>
                    </li>
                    <li>
                        <a title="我上不了太空，但可以仰望星空！如何在餐桌上致敬神舟十三号？" href="" target="_blank">
                            <i><img class="imgLoad" src="https://i3.meishichina.com/attachment/recipe/2020/03/10/2020031015838212239151.jpg?x-oss-process=style/c320" ></i>
                            <div class="os"></div>
                            <p class="line2">我上不了太空，但可以仰望星空！如何在餐桌上致敬神舟十三号？<br><span>18篇菜谱</span></p>
                        </a>
                    </li>
                    <li>
                        <a title="小白菜的家常做法大全" href="" target="_blank">
                            <i><img class="imgLoad" src="https://i3.meishichina.com/attachment/recipe/2018/01/20/20180120151645829310413.jpg?x-oss-process=style/c320" ></i>
                            <div class="os"></div>
                            <p class="line2">小白菜的家常做法大全<br><span>78篇菜谱</span></p>
                        </a>
                    </li>
                    <li>
                        <a title="家常菜 素菜《完》" href="" target="_blank">
                            <i><img class="imgLoad" src="https://i3.meishichina.com/attachment/collect/2020/11/26/2020112616063870271878197577.jpg?x-oss-process=style/c320" ></i>
                            <div class="os"></div>
                            <p class="line2">家常菜 素菜《完》<br><span>93篇菜谱</span></p>
                        </a>
                    </li>
                    <li>
                        <a title="我上不了太空，但可以仰望星空！如何在餐桌上致敬神舟十三号？" href="" target="_blank">
                            <i><img class="imgLoad" src="https://i3.meishichina.com/attachment/collect/2021/10/15/2021101516342586157241.jpeg?x-oss-process=style/c320" ></i>
                            <div class="os"></div>
                            <p class="line2">我上不了太空，但可以仰望星空！如何在餐桌上致敬神舟十三号？<br><span>18篇菜谱</span></p>
                        </a>
                    </li>
                    <li>
                        <a title="小白菜的家常做法大全" href="" target="_blank">
                            <i><img class="imgLoad" src="https://i3.meishichina.com/attachment/collect/2021/05/27/2021052716221024345348197577.jpg?x-oss-process=style/c320" ></i>
                            <div class="os"></div>
                            <p class="line2">小白菜的家常做法大全<br><span>78篇菜谱</span></p>
                        </a>
                    </li>
                    <li>
                        <a title="家常菜 素菜《完》" href="" target="_blank">
                            <i><img class="imgLoad" src="https://i3.meishichina.com/attachment/recipe/2018/02/07/20180207151800778237013.jpg?x-oss-process=style/c320" ></i>
                            <div class="os"></div>
                            <p class="line2">家常菜 素菜《完》<br><span>93篇菜谱</span></p>
                        </a>
                    </li>
                </ul>
                
                
            </div>
            <span class="left" > <i></i></span>
            <span class="right" > <i></i></span>
        </div>
        <div class="recipe_index_n10 mt20">
            <a href="" target="_blank" title="一周最热">
                <img class="imgLoad" src="https://static.meishichina.com/v6/img/zhen/r01.jpg" style="display: block;">
                一周最热
            </a>
            <a href="" target="_blank" title="人气菜肴">
                <img class="imgLoad" src="https://static.meishichina.com/v6/img/zhen/r02.jpg" style="display: block;">
                人气菜肴
            </a>
            <a href="" target="_blank" title="春季食谱">
                <img class="imgLoad" src="https://static.meishichina.com/v6/img/zhen/cjsp.png" style="display: block;">
                春季食谱
            </a>
            <a href="" target="_blank" title="高颜值">
                <img class="imgLoad" src="https://static.meishichina.com/v6/img/zhen/r04.jpg" style="display: block;">
                高颜值
            </a>
            <a href="" target="_blank" title="快手菜">
                <img class="imgLoad" src="https://static.meishichina.com/v6/img/zhen/r05.jpg" style="display: block;">
                快手菜
            </a>
            <a href="" target="_blank" title="早餐">
                <img class="imgLoad" src="https://static.meishichina.com/v6/img/zhen/r06.jpg" style="display: block;">
                早餐
            </a>
            <a href="" target="_blank" title="家常菜谱">
                <img class="imgLoad" src="https://static.meishichina.com/v6/img/zhen/r07.jpg" style="display: block;">
                家常菜谱
            </a>
            <a href="" target="_blank" title="烘焙大全">
                <img class="imgLoad" src="https://static.meishichina.com/v6/img/zhen/r08.jpg" style="display: block;">
                烘焙大全
            </a>
            <a href="" target="_blank" title="亲子专区">
                <img class="imgLoad" src="https://static.meishichina.com/v6/img/zhen/r09.jpg" style="display: block;">
                亲子专区
            </a>
            <a href="" target="_blank" title="所有菜谱">
                <img class="imgLoad" src="https://static.meishichina.com/v6/img/zhen/r10.jpg" style="display: block;">
                所有菜谱
            </a>
        </div>
        <div id="recipeindex_info">
            <div id="recipeindex_info_wrap">
                <section>
                    <div class="active"><a href="javascript:void(0);">最新推荐</a></div>
                    <div><a href="javascript:void(0);">最新发布</a></div>
                    <div><a href="javascript:void(0);">热菜</a></div>
                    <div><a href="javascript:void(0);">凉菜</a></div>
                    <div><a href="javascript:void(0);">汤羹</a></div>
                    <div><a href="javascript:void(0);">主食</a></div>
                    <div><a href="javascript:void(0);">小吃</a></div>
                    <div><a href="javascript:void(0);">西餐</a></div>
                    <div><a href="javascript:void(0);">烘焙</a></div>
                    <div><a href="javascript:void(0);">自制食材</a></div>
                    <a class="right" href="javascript:void(0);">全部分类</a>
                </section>
            </div>
            <div class="list-wp">
                <ul class="list">
                    <!-- <li>
                        <a title="白菜牛肉小火锅" href="" target="_blank"><i><img alt="白菜牛肉小火锅" class="imgLoad" src="https://i3.meishichina.com/attachment/recipe/2021/12/04/2021120416386136525191.jpg?x-oss-process=style/c320" style="display: block;"></i>
                            <p>白菜牛肉小火锅</p>
                        </a>
                        <a title="不做妖精好多年" href="" target="_blank" class="u">不做妖精好多年</a>
                    </li> -->
                </ul>
                <a class="more" href="javascript:;">加载更多</a>
            </div>
        
        </div>
    </div>
    <script >
        function uesAjax(){
            let outList = document.querySelector(".list-wp")
            let more = document.querySelector(".more")
            let page = 1
            let listMovies = document.querySelector(".list-wp .list")
            let str = ""
            more.onclick = function(){
                let a= document.querySelector("#recipeindex_info_wrap>section div[class=active] a")
                page+=1
                if(a.innerHTML == "最新发布"){
                        sendAjax("0","new",page)
                    } else if(a.innerHTML == "最新推荐"){
                        sendAjax("0","hot",page)
                    } else if(a.innerHTML == "热菜"){
                        sendAjax("0","hot",page)
                    }else if(a.innerHTML == "凉菜"){
                        sendAjax("0","new",page)
                    }else if(a.innerHTML == "汤羹"){
                        sendAjax("60","tag",page)
                    }else if(a.innerHTML == "主食"){
                        sendAjax("60","tag",page)
                    }else if(a.innerHTML == "小吃"){
                        sendAjax("60","tag",page)
                    }else if(a.innerHTML == "西餐"){
                        sendAjax("60","tag",page)
                    }else if(a.innerHTML == "烘焙"){
                        sendAjax("60","tag",page)
                    }else if(a.innerHTML == "自制食材"){
                        sendAjax("60","tag",page)
                    }
            }
            function sendAjax(classid="0",orderbt = "hot",page = "1"){
                let xhr = new XMLHttpRequest()
                xhr.onreadystatechange = function(){
                    if(xhr.readyState == 4 && xhr.status == 200){
                        let result = JSON.parse(xhr.response)
                        console.log(result.data);
                        for(let i = 0;i < result.data.length;i++){
                            str += ` <li>
                        <a title="${result.data[i].title}" href="" target="_blank"><i><img alt="${result.data[i].title}" class="imgLoad" src="${result.data[i].mscover}" style="display: block;"></i>
                            <p>${result.data[i].title}</p>
                        </a>
                        <a title="${result.data[i].username}" href="" target="_blank" class="u">${result.data[i].username}</a>
                    </li>`
                        }
                        listMovies.innerHTML = str
                    }
                }
                xhr.open("get",`https://home.meishichina.com/ajax/ajax.php?ac=recipe&op=getMoreDiffStateRecipeList&classid=${classid}&orderby=${orderbt}&page=${page}`)
                xhr.send()
            }
            sendAjax()
            let as = document.querySelectorAll("#recipeindex_info_wrap>section div a")
            for(let i = 0;i < as.length;i++){
                as[i].onclick = function (event){
                    console.log(111);
                    str=""
                    for (let i = 0; i < as.length; i++) {
                    as[i].parentNode.classList.remove("active")
                    } 
                    this.parentNode.classList.add("active")
                    if(this.innerHTML == "最新发布"){
                        sendAjax("0","new","1")
                    } else if(this.innerHTML == "最新推荐"){
                        sendAjax("0","hot","1")
                    } else if(this.innerHTML == "热菜"){
                        sendAjax("0","hot","5")
                    }else if(this.innerHTML == "凉菜"){
                        sendAjax("0","new","3")
                    }else if(this.innerHTML == "汤羹"){
                        sendAjax("60","tag","4")
                    }else if(this.innerHTML == "主食"){
                        sendAjax("60","tag","2")
                    }else if(this.innerHTML == "小吃"){
                        sendAjax("60","tag","2")
                    }else if(this.innerHTML == "西餐"){
                        sendAjax("60","tag","2")
                    }else if(this.innerHTML == "烘焙"){
                        sendAjax("60","tag","3")
                    }else if(this.innerHTML == "自制食材"){
                        sendAjax("60","tag","2")
                    }
                }
            }
        }
        uesAjax()
        function head(){
        var shows = document.querySelectorAll("#wrap header .show")
        var barBoxs = document.querySelectorAll("#wrap header .show .bar-box")
        var show3 = document.querySelector("#wrap header .show3")
        var show3Img = show3.querySelector("img:last-child")
        shows.forEach(function(item,i){
            item.index = i
            item.onmouseenter = function(){
                barBoxs[this.index].style.display = "block"
            }
            item.onmouseleave = function(){
                barBoxs[this.index].style.display = "none"
            }
        })
        show3.onmouseenter = function(){
            show3Img.style.display = "block"
        }
        show3.onmouseleave = function(){
            show3Img.style.display = "none"
        }
    }
        head()
        function smallSlide (){
            var w2 = document.querySelector(".w2")
            var box = document.querySelector('.w2 .banner');
            var left = document.querySelector('.w2 .left');
            var right = document.querySelector('.w2 .right');
            var bannerList = document.querySelector('.w2 .bannerList');
            var lis = box.querySelectorAll("li")
            var isMove = false
            var timer = null
            var timeAll = 600
            var timeStep = 20
            bannerList.style.left = -box.offsetWidth + "px"
            w2.onmouseenter = function(){
                left.style.opacity = 1;
                right.style.opacity = 1;
                
            };
            w2.onmouseleave = function(){
                left.style.opacity = 0;
                right.style.opacity = 0;
            }
            right.onclick = function(){
                move(true);
            }
            
            
            left.onclick = function(){
                move(false);
            }
            function move(flag){
                if(isMove){
                    return
                }
                isMove = true
                setTimeout(function(){
                    isMove = false
                },920)
                    if(flag){
                        var dis = -box.offsetWidth
                    }else{
                        var dis = box.offsetWidth
                    }
                
                var lastDis = bannerList.offsetLeft + dis
                console.log(dis);
                var step = dis / (timeAll/timeStep)
                timer = setInterval(function(){
                    var left = bannerList.offsetLeft + step
                    if(step<0){
                        if(left <= lastDis) left = lastDis
                    }else{
                        if(left >= lastDis) left = lastDis
                    }
                    if(left == lastDis){
                        clearInterval(timer)
                        if(left == -box.offsetWidth*4){
                            left = -box.offsetWidth
                        }else if(left == 0){
                            left = -box.offsetWidth*3
                        }
                    }
                    
                    bannerList.style.left = left + "px"
                },timeStep)
                
            }
        }
        smallSlide ()
    </script>
</body>
</html>